<import src="../../common/page_loading.wxml"/>

<view class="{{isIphoneX ? 'has-safe-padding' : ''}}">
  <view class="daily__container">
    <view wx:if="{{isFetching}}">
      <template is="page_loading" />
    </view>

    <view class="daily__title">{{daily.title}}</view>
    <view class="daily__hr"></view>
    <view class="daily__create">{{daily.created_at}}</view>
    <view class="daily__content">{{daily.content}}</view>
  </view>

  <block wx:if="{{!isFetching}}">
    <comment isShowComment="{{isShowComment}}" article_id="{{id}}" bindclosecommentevent="closeComment" bindopencommentevent="openComment"></comment>

    <block wx:if="{{isLogin}}">
      <view class="u-fix-bottom {{isIphoneX ? 'has-safe-padding' : ''}}" bindtap="openComment">
        <view class="u-fix-bottom--bar">
          <image class="u-fix-bottom--icon" src="/icon_png/article_comment.png" />
          <text>评论</text>
        </view>
      </view>
    </block>
    <block wx:else>
      <view class="u-fix-bottom {{isIphoneX ? 'has-safe-padding' : ''}}">
        <button class="u-fix-bottom--bar is-button" open-type="getUserInfo" bindgetuserinfo="getUserInfo">
          <image class="u-fix-bottom--icon" src="/icon_png/article_comment.png" />
          <text>评论</text>
        </button>
      </view>
    </block>
  </block>
  <settingEntry></settingEntry>
</view>
