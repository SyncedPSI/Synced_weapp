<import src="../common/loading.wxml"/>

<nav isFromWeapp="{{isFromWeapp}}" title="{{navigateTitle}}"></nav>
<view class="container">
  <view class="header" style="margin-top: {{statusBarHeight}}px;">
    <view class='search_box'>
      <input placeholder-style='color: #9d9d9d; font-weight: 200;' placeholder='搜索知识' focus="{{keywords === ''}}" type="text" value="{{keywords}}"
        confirm-type="search" bindinput='searchByKeyword' bindconfirm='search' bindblur='search'></input>
      <view class='search_button' >
        <image src="/icons/ic_search.png"></image>
      </view>
    </view>
  </view>
  <scroll-view scroll-y="{{true}}" bindscrolltolower="fetchMoreData" enable-back-to-top>
    <view class="search__container">
      <view hidden="{{node === null}}">
        <node id="{{node.id}}" nodeId="{{node.id}}" name="{{node.zh_name ? node.zh_name : node.en_name}}" type="{{node.type}}" summary="{{node.summary}}"></node>
      </view>
      <view wx:for="{{articles}}" wx:key="{{item.id}}">
        <article id="{{item.id}}" articleId="{{item.id}}" title="{{item.title}}" category="{{item.category}}" published_at="{{item.published_at}}"></article>
      </view>
    </view>
    <view hidden="{{!hasNextPage || articles.length === 0}}">
      <template is="loading" />
    </view>
  </scroll-view>
  <settingEntry></settingEntry>
</view>
