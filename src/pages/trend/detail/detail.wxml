<import src="/pages/common/page_loading.wxml"/>
<import src="/pages/common/comment_bottom_bar.wxml"/>
<import src="../../../wxParse/wxParse.wxml"/>

<nav isFromWeapp="{{isFromWeapp}}" title="{{navigateTitle}}" hasHeaderHeight  pageLogin="{{isLogin}}"></nav>
<view class="{{isIphoneX ? 'has-safe-padding' : ''}}">
  <template is="page_loading" wx:if="{{trend === null}}" />

  <block wx:else>
    <image class="trend--cover" src='/images/trend_task.jpg' wx:if="{{trend.category === 'article'}}" />
    <image class="trend--cover" src='/images/trend_paper.jpg' wx:else />
    <view class="trend--title">{{trend.title}}</view>
    <view class="trend--desc">
      <template is="wxParse" data="{{wxParseData:trendDesc.nodes}}" />
    </view>

    <view class="trend--list">
      <block wx:for="{{cards}}" wx:key="{{item.cardable_id}}">
        <navigator url="/pages/article/article?id={{item.cardable_id}}" class="trend-item" hover-class="none" wx:if="{{item.cardable_type === 'articles'}}">
          <view class="trend-item__title">{{item.default_title}}</view>
          <view class="trend-item__author">{{item.author}}</view>
          <view class="trend-item__desc">{{item.default_content}}</view>
        </navigator>
        <view class="trend-item" wx:else data-url="{{item.default_url}}" bindtap="copySource">
          <view class="trend-item__title">{{item.default_title}}</view>
            <view class="trend-item__author">{{item.author}}</view>
            <view class="trend-item__desc">{{item.default_content}}</view>
          </view>
      </block>
    </view>
    <view class="trend--content">
      <template is="wxParse" data="{{wxParseData:trendContent.nodes}}" />
    </view>
    <comment isSmallPadding isShowComment="{{isShowComment}}" baseUrl="/trends/{{id}}" bindclosecomment="closeComment" bindopencomment="openComment"></comment>
    <template is="comment-bottom-bar" data="{{isLogin: isLogin, isIphoneX: isIphoneX, prePath: '../../..'}}" />
  </block>
</view>


